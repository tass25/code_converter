# ðŸš€ Intentions-Based Code Converter

AI-powered multi-agent system for converting code between programming languages using semantic understanding.

## âœ¨ Features

- **ðŸ§  Intentions-Based Conversion**: Extracts developer intent, not just syntax
- **ðŸ¤– Multi-Agent System**: 4 specialized AI agents working together
- **ðŸ”„ Feedback Loops**: Automatic quality validation with retry logic
- **ðŸŒ REST API**: FastAPI backend with automatic documentation
- **ðŸ“Š Monitoring**: Prometheus + Grafana dashboards
- **ðŸ“ Logging**: ELK Stack for comprehensive debugging
- **ðŸ³ Docker**: One-command deployment
- **ðŸŽ¯ High Quality**: Generates idiomatic, production-ready code

## ðŸ—ï¸ Architecture

```
User Input (R Code)
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Parser Agent    â”‚  â†’ Analyzes code structure
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Intent Extractor â”‚  â†’ Extracts developer goals
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Validator Agent  â”‚  â†’ Checks completeness
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“ (retry loop if needed)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Generator Agent  â”‚  â†’ Creates Python code
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
Generated Code (Python)
```

## ðŸš€ Quick Start

### Prerequisites

- Python 3.10+
- Docker (optional)
- Groq API key (free at https://console.groq.com/)

### 1. Clone and Setup

```bash
# Clone repository
git clone https://github.com/tass25/code_converter.git
cd code-converter

# Create virtual environment
python -m venv codec
source codec/bin/activate  # On Windows: codec\Scripts\activate

# Install dependencies
pip install -r requirements.txt

# Create .env file with your API key
echo "GROQ_API_KEY=your_key_here" > .env
```

### 2. Test Individual Agents

```bash
# Test Parser Agent
python parser_agent.py

# Test Intent Extractor
python intent_extractor.py

# Test Validator
python validator_agent.py

# Test Code Generator
python code_generator.py
```

### 3. Test Complete Workflow

```bash
# Test LangGraph workflow with all agents
python workflow.py
```

### 4. Use Command-Line Interface

```bash
# Convert a file
python convert.py input.r output.py

# Example
python convert.py test_script.r test_script.py
```

### 5. Start API Server

```bash
# Run FastAPI server
python api.py

# API will be available at:
# - API: http://localhost:8000
# - Docs: http://localhost:8000/docs
# - Health: http://localhost:8000/health
```

### 6. Test API

```bash
# Using curl
curl -X POST "http://localhost:8000/convert" \
  -H "Content-Type: application/json" \
  -d '{
    "source_code": "data <- read.csv(\"file.csv\")\nmean(data$value)",
    "source_language": "R",
    "target_language": "Python"
  }'

# Or visit http://localhost:8000/docs for interactive API docs
```

## ðŸ³ Docker Deployment

### Full Stack (API + Monitoring)

```bash
# Build and start all services
docker-compose up -d

# View logs
docker-compose logs -f api

# Stop all services
docker-compose down
```

### Services

After running `docker-compose up -d`:

- **API**: http://localhost:8000
- **API Docs**: http://localhost:8000/docs
- **Prometheus**: http://localhost:9090
- **Grafana**: http://localhost:3000 (admin/admin)
- **Kibana**: http://localhost:5601

## ðŸ“ Project Structure

```
code-converter/
â”œâ”€â”€ parser_agent.py           # Agent 1: Code structure analysis
â”œâ”€â”€ intent_extractor.py       # Agent 2: Intention extraction
â”œâ”€â”€ validator_agent.py        # Agent 3: Quality validation
â”œâ”€â”€ code_generator.py         # Agent 4: Code generation
â”œâ”€â”€ workflow.py               # LangGraph workflow orchestration
â”œâ”€â”€ api.py                    # FastAPI REST API
â”œâ”€â”€ convert.py                # CLI interface
â”œâ”€â”€ requirements.txt          # Python dependencies
â”œâ”€â”€ Dockerfile                # Docker container
â”œâ”€â”€ docker-compose.yml        # Multi-container setup
â”œâ”€â”€ .env                      # Environment variables (API keys)
â”œâ”€â”€ .gitignore               # Git ignore rules
â”œâ”€â”€ monitoring/
â”‚   â”œâ”€â”€ prometheus.yml       # Prometheus config
â”‚   â””â”€â”€ grafana-dashboards/  # Grafana dashboards
â””â”€â”€ tests/                   # Test files
```

## ðŸ”§ Configuration

### Supported Languages

**Current (MVP)**:
- R â†’ Python âœ…
- Python â†’ R âœ…

**Planned**:
- Python â†’ Julia
- SQL â†’ Python
- JavaScript â†’ TypeScript

### Environment Variables

```bash
# .env file
GROQ_API_KEY=your_groq_api_key_here

# Optional
MAX_ITERATIONS=3
API_HOST=0.0.0.0
API_PORT=8000
```

### Customization

#### Add New Language

1. Create language profile in `languages/` folder:

```yaml
# languages/julia.yaml
language: Julia
parser: tree-sitter-julia
data_structures:
  - DataFrame
  - Array
operations:
  - groupby: combine() with grouping
  - aggregate: aggregate() function
best_practices:
  - "Use DataFrames.jl for tabular data"
  - "Leverage Julia's speed for numerical operations"
```

2. Update `code_generator.py` language profiles

3. Test conversion!

## ðŸ“Š Monitoring

### Grafana Dashboards

Access Grafana at http://localhost:3000:

- **Overview**: Conversion volumes, success rates
- **Agent Performance**: Latency and success by agent
- **System Health**: Resource usage, error rates

### Prometheus Metrics

Access Prometheus at http://localhost:9090:

- `conversions_total` - Total conversions by language pair
- `agent_duration_seconds` - Agent processing time
- `validation_failures_total` - Validation failure count

### Kibana Logs

Access Kibana at http://localhost:5601:

- Full agent conversations
- Error traces with context
- Intent graphs for debugging

## ðŸ§ª Testing

```bash
# Run all tests
pytest

# Run specific test file
pytest tests/test_parser.py

# Run with coverage
pytest --cov=. tests/
```

## ðŸ“– API Documentation

### POST /convert

Convert code from source to target language.

**Request:**
```json
{
  "source_code": "library(dplyr)\ndata <- read.csv('file.csv')",
  "source_language": "R",
  "target_language": "Python",
  "max_iterations": 3
}
```

**Response:**
```json
{
  "success": true,
  "generated_code": "import pandas as pd\ndata = pd.read_csv('file.csv')",
  "intent_graph": {...},
  "validation_result": {...},
  "iterations": 1,
  "processing_time": 3.45
}
```

### POST /convert/file

Upload and convert a code file.

**Request:**
- Form data with file upload
- Query params: `target_language`, `max_iterations`

## ðŸ¤ Contributing

1. Fork the repository
2. Create a feature branch (`git checkout -b feature/amazing`)
3. Commit your changes (`git commit -m 'Add amazing feature'`)
4. Push to branch (`git push origin feature/amazing`)
5. Open a Pull Request

## ðŸ“ License

MIT License - see LICENSE file for details

## ðŸ™ Acknowledgments

- **Groq** for free, blazing-fast LLM API
- **LangChain/LangGraph** for agent orchestration
- **Anthropic** for Claude and prompt engineering guidance

## ðŸ“§ Contact

For questions or issues, please open a GitHub issue.

---

**Built with â¤ï¸**